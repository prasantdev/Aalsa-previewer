const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,recognition=new SpeechRecognition,sendBtn=document.getElementById("send-btn"),msgInput=document.getElementById("msg-input");function writeMessageOnInput(){let typingSound=document.getElementById("typing-sound");if("mic"!=sendBtn.innerText){if(""==msgInput.value.trim(""))return!1;writeUserMsg(msgInput.value),msgInput.value="",sendBtn.children[0].innerText="mic"}else recognition.start()}function writeUserMsg(arg){if(""==arg||null==arg)return;let messages=document.getElementById("messages"),userMsgBox=document.createElement("div");userMsgBox.classList.add("user-msg-container"),userMsgBox.innerHTML=`<p class='msg-content'>${arg}</p>`,messages.appendChild(userMsgBox),window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight),getBotMsg(arg)}function getBotMsg(userMsg){let url;userMsg=userMsg.replace(/\s/gi,"+"),fetch(`https://cors-fetch-it.herokuapp.com/https://api.udit.gq/api/chatbot?message=${userMsg}&name=Aalsa&user=MESSAGE_AUTHOR_ID&gender=female`).then(response=>response.json()).then(data=>{writeBotMsg(data.message)})}function writeBotMsg(arg){let messages=document.getElementById("messages"),botMsgBox=document.createElement("div"),botDataBox=document.createElement("div");botDataBox.classList.add("bot-data-box"),botDataBox.innerHTML="\n\n  <img src='neko.png' class='msg-pfp'>\n\n  <div class='msg-bot-name'><strong>Aalsa</strong></div>\n\n  ",botMsgBox.classList.add("bot-msg-container"),botMsgBox.appendChild(botDataBox),botMsgBox.innerHTML+=`<p class='msg-content'>${arg}</p>`,messages.appendChild(botMsgBox),window.scrollTo(0,document.body.scrollHeight||document.documentElement.scrollHeight),recognition.abort(),responsiveVoice.speak(arg,"US English Female",{volume:1}),responsiveVoice.isPlaying()}recognition.onresult=function(e){let resultIndex=e.resultIndex,transcript=e.results[resultIndex][0].transcript;transcript.includes("hello"),writeUserMsg(transcript)},msgInput.addEventListener("input",()=>{""!=msgInput.value.trim("")?sendBtn.children[0].innerText="send":sendBtn.children[0].innerText="mic"});const menu=document.querySelector(".contextmenu");let menuVisible=!1;const toggleMenu=command=>{setTimeout(()=>{menu.style.display="show"===command?"inline-block":"none",menuVisible=!menuVisible},100)},setPosition=({top:top,left:left})=>{toggleMenu("show"),setTimeout(()=>{var lw=innerWidth,lh=innerHeight,w=menu.clientWidth;h=menu.clientHeight;var l=left,t=top;l+w+16>=lw&&(l=l-w-16),t+h+16>=lh&&(t=t-h-16),menu.style.left=`${l}px`,menu.style.top=`${t}px`},100)};window.addEventListener("contextmenu",e=>{if("contextmenu"!==e.target.className&&"context-option"!==e.target.className&&/user-msg-container|bot-msg-container|msg-content|bot-data-box|msg-pfp|msg-badge/g.test(e.target.className)){let el;contextTarget=e.target,e.preventDefault(),el=e.target.className.length-/user-msg-container|bot-msg-container/.test(e.target.className).length==0?e.target:e.target.closest(".user-msg-container")||e.target.closest(".bot-msg-container");const origin={left:e.pageX,top:e.pageY};return setPosition(origin),!1}}),document.getElementById("context-copy").addEventListener("click",e=>{var ell,el;copy((contextTarget.closest(".user-msg-container")||contextTarget.closest(".bot-msg-container")).querySelector(".msg-content").textContent)}),recognition.onend=function(){},window.addEventListener("load",()=>{sendBtn.addEventListener("click",writeMessageOnInput)});let count=0;function copy(t){try{var copyText=document.createElement("textarea"),ttbcpd="string"==typeof t?t:t.textContent;copyText.style.position="fixed",copyText.style.left="-99999999px",copyText.style.top="-99999999px",copyText.value=t,document.body.appendChild(copyText),copyText.select(),copyText.setSelectionRange(0,9999999999999),document.execCommand("copy"),document.body.removeChild(copyText)}catch(e){alert("Couldn't copy the message. Please contact the developer(Prasant)")}}window.addEventListener("click",()=>{0===count&&(writeBotMsg("Hi there dear ! ðŸ¤—"),count++),menuVisible&&toggleMenu("hide"),contextTarget=null});